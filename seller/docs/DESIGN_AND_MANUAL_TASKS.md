# Дизайн и ручные задачи для Seller Dashboard

Этот документ описывает задачи, которые должен выполнить человек (дизайнер, DevOps, администратор), а не AI.

---

## 1. Дизайн интерфейса

### 1.1. Дизайн-система

#### Цветовая палитра
- **Основной цвет**: (определить основной бренд-цвет)
- **Акцентный цвет**: (определить акцентный цвет)
- **Фон**: (светлый/темный режим)
- **Текст**: (цвета для заголовков, основного текста, вторичного текста)
- **Состояния**: (цвета для success, error, warning, info)
- **Границы**: (цвета для границ элементов)

#### Типографика
- **Шрифты**: (выбрать семейство шрифтов, например Inter, Roboto)
- **Заголовки**: (размеры H1-H6, веса, межстрочные интервалы)
- **Основной текст**: (размер, вес, межстрочный интервал)
- **Вторичный текст**: (размер, вес, цвет)
- **Кнопки**: (размеры текста, веса)

#### Компоненты UI
- **Кнопки**: (primary, secondary, outline, ghost варианты)
- **Инпуты**: (состояния: default, focus, error, disabled)
- **Карточки**: (тени, скругления, отступы)
- **Модальные окна**: (размеры, overlay, анимации)
- **Таблицы**: (стили заголовков, строк, пагинация)
- **Формы**: (группировка полей, валидация, ошибки)
- **Навигация**: (сайдбар, хедер, breadcrumbs)
- **Индикаторы**: (загрузка, прогресс-бары, бейджи)

### 1.2. Макеты страниц

#### Страница `/auth` - Вход через Telegram
**Структура:**
- Центральная карточка с логотипом Vibelook
- Заголовок "Войдите в кабинет селлера"
- Кнопка "Войти через Telegram" (большая, с иконкой Telegram)
- Текст с описанием процесса
- Ссылка на политику конфиденциальности

**Требования:**
- Минималистичный дизайн
- Адаптивность для мобильных устройств
- Интеграция с Telegram Widget

---

#### Страница `/dashboard` - Главный экран
**Структура:**
- Хедер с балансом, уведомлениями, профилем
- Сайдбар с навигацией
- Основной контент с 3 блоками:

**Блок 1: Индекс узнаваемости бренда**
- График за 30 дней (линейный график)
- Две метрики: "WB search volume" и "Yandex Wordstat volume"
- Текстовая интерпретация с рекомендациями
- Примеры текстов:
  - "Низкая узнаваемость — рекомендуем запустить тестовую кампанию"
  - "Рост на +30% — усиливаем постинг"

**Блок 2: Эффективность луков**
- Карточки с метриками:
  - Количество луков
  - Просмотры
  - Клики
  - Переходы на WB/Ozon
  - CTR
  - CPA перехода на MP
- Иконки для каждой метрики
- Сравнение с предыдущим периодом (рост/падение)

**Блок 3: Аудитория**
- Гистограмма распределения по росту
- Круговая диаграмма размеров (S/M/L/XL)
- Круговая диаграмма цветотипов
- Круговая диаграмма архетипов
- Топ-3 "идеальных" профиля аудитории

**Требования:**
- Использовать библиотеку графиков (Chart.js, Recharts, или другую)
- Адаптивная сетка (grid layout)
- Карточки с тенями и скруглениями

---

#### Страница `/billing/lock` - Блокировка после trial
**Структура:**
- Большая карточка с предупреждением
- Заголовок "Пробный период закончился"
- Описание ограничений
- 3 карточки тарифов (Start, Pro, Enterprise)
- Кнопка "Оплатить" для выбранного тарифа
- Кнопка "Запросить Enterprise" (для Enterprise)

**Требования:**
- Яркий, привлекающий внимание дизайн
- Четкое выделение преимуществ каждого тарифа

---

#### Страница `/integrations` - Интеграции WB/Ozon
**Структура:**
- Две секции: WB и Ozon
- Для каждой секции:
  - Поле ввода API ключа
  - Кнопка "Проверить ключ"
  - Индикатор статуса (OK/Ошибка)
  - Кнопка "Импортировать товары"
  - Статус последней синхронизации
  - Количество импортированных товаров
  - Список ошибок (если есть)

**Требования:**
- Четкая визуализация статуса
- Информативные сообщения об ошибках

---

#### Страница `/products` - Список товаров
**Структура:**
- Фильтры (поиск, категория, стиль, источник)
- Кнопка "Добавить товар вручную"
- Сетка карточек товаров
- Пагинация

**Карточка товара:**
- Фото товара
- Название
- Цена (СПП и без СПП)
- Теги стиля (бейджи)
- Пол, возраст
- Статус импорта (иконка WB/Ozon/ручной)
- Чекбокс "Разрешить использовать в чужих луках"
- Кнопки: Редактировать, Удалить

**Требования:**
- Адаптивная сетка (3-4 колонки на десктопе, 1-2 на планшете, 1 на мобильном)
- Ленивая загрузка изображений

---

#### Страница `/products/add` - Добавление товара
**Структура:**
- Форма с полями:
  - Заголовок (обязательное)
  - Описание
  - Категория (выпадающий список)
  - Пол (radio buttons)
  - Возраст (radio buttons)
  - Цена СПП
  - Цена без СПП
  - Цвет (input с color picker)
  - Размерная сетка (таблица с замерами)
  - Полные замеры (расширяемая секция)
  - Ссылки на WB/Ozon
  - Загрузка фото (drag & drop, множественная)
- Кнопки: "Сохранить", "Отмена"

**Требования:**
- Валидация полей
- Предпросмотр загруженных фото
- Сохранение прогресса (localStorage)

---

#### Страница `/looks` - Каталог луков
**Структура:**
- Фильтры (по стилю, контексту)
- Кнопка "Сгенерировать новый лук"
- Сетка карточек луков
- Пагинация

**Карточка лука:**
- Миниатюра лука
- Список вещей (иконки товаров)
- Теги стиля
- Контекст "где носим"
- Статистика:
  - Просмотры
  - Клики
  - Переходы на WB/Ozon
  - CTR
  - CPA
- Кнопки: "Создать пост", "Запустить рекламу", "Редактировать"

**Требования:**
- Hover эффекты на карточках
- Модальное окно с деталями лука

---

#### Страница `/looks/generate` - Генерация лука
**Структура:**
- Шаг 1: Выбор набора
  - Радио-кнопки: "худи + низ", "худи + низ + обувь", "верх + низ + аксессуар" и т.д.
- Шаг 2: Выбор стиля (необязательно)
  - Чекбоксы или мультиселект со стилями
- Шаг 3: Кнопка "Сгенерировать"
- Результат:
  - Превью сгенерированного лука
  - Список товаров в луке
  - Кнопки: "Сохранить", "Перегенерировать"
  - Индикатор оставшихся попыток
  - Поп-ап для покупки пакета (если попытки закончились)

**Требования:**
- Пошаговый wizard
- Индикатор загрузки при генерации
- Анимация появления результата

---

#### Страница `/posting` - Автопостинг
**Структура:**
- Шаг 1: Выбор лука
  - Список/сетка сохраненных луков
- Шаг 2: Выбор площадок
  - Чекбоксы: Instagram, Facebook, VK, Telegram, Pinterest, Яндекс.Дзен, TikTok
- Шаг 3: Превью поста
  - Изображение/видео
  - Авто-текст (read-only)
- Шаг 4: Отправить/Запланировать
  - Radio: "Опубликовать сейчас" / "Запланировать"
  - Date picker для планирования
  - Кнопка "Опубликовать"

**Требования:**
- Пошаговый wizard
- Превью для каждой платформы (если отличается формат)

---

#### Страница `/campaigns` - Список кампаний
**Структура:**
- Фильтры (по статусу, цели)
- Кнопка "Создать кампанию"
- Список карточек кампаний

**Карточка кампании:**
- Название
- Цель (бейдж: "Продажи" / "Тест CTR")
- Бюджет
- Статус (бейдж: running/paused/draft)
- Метрики:
  - Показы
  - Клики
  - CTR
  - Потрачено
  - Переходы на MP
  - CPA
- Кнопки: "Открыть", "Остановить", "Повторить"

**Требования:**
- Цветовое кодирование статусов
- Сортировка по дате создания

---

#### Страница `/campaigns/create` - Создание кампании
**Структура:**
- Шаг 1: Выбор режима
  - Radio: "Продажи" / "Тест CTR"
- Шаг 2: Выбор луков
  - Для "Продажи": выбор 1 лука
  - Для "Тест CTR": выбор минимум 3 луков
- Шаг 3: Ввод бюджета
  - Input с валидацией (минимум 5000 ₽)
- Шаг 4: Подтверждение
  - Имя кампании
  - Список выбранных луков
  - Бюджет
  - Платформы (read-only, все заранее зафиксированы)
  - Кнопка "Запустить кампанию"

**Требования:**
- Валидация на каждом шаге
- Проверка баланса для Pro+

---

#### Страница `/analytics` - Расширенная аналитика
**Структура:**
- Вкладки:
  1. Переходы на WB/Ozon
  2. Аудитория
  3. Платные кампании

**Вкладка 1: Переходы на WB/Ozon**
- Таблица луков с метриками:
  - Название лука
  - Переходы
  - CPA
  - Динамика (график)
- Фильтры по периоду

**Вкладка 2: Аудитория**
- Расширенная аналитика:
  - Распределение по росту (гистограмма)
  - Распределение по размерам (круговая диаграмма)
  - Распределение по цветотипам (круговая диаграмма)
  - Распределение по архетипам (круговая диаграмма)
  - Топ-3 "идеальных" профиля
  - Рекомендации по ассортименту

**Вкладка 3: Платные кампании**
- Таблица кампаний с детальными метриками
- Фильтры по периоду, платформе

**Требования:**
- Интерактивные графики
- Экспорт данных (CSV)

---

#### Страница `/billing` - Тарифы
**Структура:**
- 3 карточки тарифов:
  - Start (~2000 ₽/мес)
  - Pro
  - Enterprise (от 100 000 ₽/мес)
- Для каждого тарифа:
  - Цена
  - Список возможностей
  - Кнопка "Выбрать тариф"
- Секция "Пакеты генераций":
  - Кнопка "Купить пакет +20 луков за N ₽"
- Секция "История транзакций":
  - Таблица транзакций

**Требования:**
- Выделение текущего тарифа
- Сравнительная таблица возможностей

---

#### Страница `/wallet` - Кошелёк (Pro/Enterprise)
**Структура:**
- Большая карточка с текущим балансом
- Кнопка "Пополнить баланс"
- Таблица списаний:
  - Дата
  - Тип (реклама, пакеты генераций)
  - Сумма
  - Описание
- Фильтры по типу, периоду

**Требования:**
- Визуализация баланса (большой шрифт)
- Цветовое кодирование типов транзакций

---

#### Страница `/settings` - Настройки профиля
**Структура:**
- Форма с полями:
  - Название бренда
  - Категория (муж/жен/унисекс) - radio buttons
  - Загрузка логотипа (drag & drop)
  - Ссылка на WB
  - Ссылка на Ozon
  - Чекбокс "Участие в кросс-луках"
- Кнопка "Сохранить изменения"

**Требования:**
- Превью логотипа
- Валидация URL

---

### 1.3. Компоненты UI

#### Общие компоненты
- **Layout** - основной layout с сайдбаром и хедером
- **Sidebar** - боковая навигация
- **Header** - шапка с балансом, уведомлениями, профилем
- **Button** - кнопки разных типов и размеров
- **Input** - текстовые поля
- **Select** - выпадающие списки
- **Card** - карточки для контента
- **Modal** - модальные окна
- **Table** - таблицы с пагинацией
- **Badge** - бейджи для статусов и тегов
- **LoadingSpinner** - индикатор загрузки
- **EmptyState** - пустое состояние
- **ErrorBoundary** - обработка ошибок

#### Специфичные компоненты
- **TelegramLogin** - кнопка входа через Telegram
- **TariffCard** - карточка тарифа
- **ProductCard** - карточка товара
- **LookCard** - карточка лука
- **CampaignCard** - карточка кампании
- **BrandAwarenessBlock** - блок индекса узнаваемости
- **LooksEffectivenessBlock** - блок эффективности луков
- **AudienceBlock** - блок аудитории
- **IntegrationForm** - форма интеграций
- **LookGenerator** - генератор луков
- **PostForm** - форма создания поста
- **CampaignForm** - форма создания кампании

### 1.4. Адаптивность

#### Breakpoints
- **Mobile**: до 768px
- **Tablet**: 768px - 1024px
- **Desktop**: от 1024px

#### Требования к мобильной версии
- Сайдбар превращается в hamburger menu
- Карточки в одну колонку
- Упрощенные формы
- Оптимизация графиков для маленьких экранов
- Touch-friendly элементы (минимум 44x44px)

---

## 2. Ручные задачи (что делает человек, не AI)

### 2.1. Регистрация аккаунтов

#### Регистрация в YooKassa
1. Перейти на https://yookassa.ru/
2. Зарегистрировать аккаунт продавца
3. Пройти верификацию (подготовить документы)
4. Получить `SHOP_ID` и `SECRET_KEY`
5. Настроить webhook URL: `https://seller.vibelook.com/api/payments/webhook`
6. Сохранить ключи в переменные окружения:
   - `YOOKASSA_SHOP_ID`
   - `YOOKASSA_SECRET_KEY`

#### Настройка Telegram Widget для авторизации
1. Создать бота через @BotFather (если еще не создан)
2. Получить токен бота
3. Настроить Telegram Widget:
   - Перейти в настройки бота
   - Включить "Login Widget"
   - Получить `bot_username`
4. Сохранить в переменные окружения:
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_WIDGET_BOT_USERNAME`
5. Добавить скрипт Telegram Widget на страницу `/auth`

#### Регистрация рекламных аккаунтов

**Facebook Ads:**
1. Создать Business Manager аккаунт
2. Создать рекламный аккаунт
3. Получить Access Token через Graph API
4. Настроить веб-хуки для отслеживания событий
5. Сохранить в переменные окружения:
   - `FACEBOOK_ADS_ACCOUNT_ID`
   - `FACEBOOK_ADS_ACCESS_TOKEN`

**VK Ads:**
1. Создать рекламный кабинет в VK
2. Получить Access Token через VK API
3. Сохранить в переменные окружения:
   - `VK_ADS_ACCOUNT_ID`
   - `VK_ADS_ACCESS_TOKEN`

**Яндекс.Директ:**
1. Зарегистрироваться в Яндекс.Директ
2. Создать рекламный кабинет
3. Получить OAuth токен
4. Сохранить в переменные окружения:
   - `YANDEX_ADS_CLIENT_ID`
   - `YANDEX_ADS_CLIENT_SECRET`
   - `YANDEX_ADS_ACCESS_TOKEN`

**TikTok Ads:**
1. Создать рекламный аккаунт в TikTok Ads Manager
2. Получить Access Token через TikTok Marketing API
3. Сохранить в переменные окружения:
   - `TIKTOK_ADS_ACCOUNT_ID`
   - `TIKTOK_ADS_ACCESS_TOKEN`

### 2.2. Настройка домена

#### Настройка поддомена
1. Выбрать поддомен: `seller.vibelook.com` или `seller.vibelook.ru`
2. В панели управления DNS добавить A-запись:
   - Имя: `seller`
   - Тип: `A`
   - Значение: IP адрес сервера (или CNAME на Vercel)
3. Если используется Vercel:
   - Добавить домен в настройках проекта
   - Настроить DNS записи согласно инструкциям Vercel

#### Настройка SSL сертификата
1. Если используется Vercel - SSL настраивается автоматически
2. Если собственный сервер - настроить Let's Encrypt или другой SSL провайдер

### 2.3. Настройка AI сервисов

#### Выбор AI сервиса для генерации изображений
**Варианты:**
- OpenAI DALL-E 3
- Replicate (Stable Diffusion)
- Midjourney API
- Другой сервис

**Действия:**
1. Зарегистрироваться в выбранном сервисе
2. Получить API ключ
3. Протестировать генерацию изображений
4. Сохранить в переменные окружения:
   - `AI_IMAGE_GENERATION_API_KEY`
   - `AI_IMAGE_GENERATION_API_URL`

#### Выбор AI сервиса для классификации стилей
**Варианты:**
- OpenAI GPT-4 Vision
- Google Vision API
- Другой сервис

**Действия:**
1. Зарегистрироваться в выбранном сервисе
2. Получить API ключ
3. Протестировать классификацию стилей
4. Сохранить в переменные окружения:
   - `AI_STYLE_CLASSIFICATION_API_KEY`
   - `AI_STYLE_CLASSIFICATION_API_URL`

### 2.4. Настройка Telegram бота

#### Создание бота (если еще не создан)
1. Написать @BotFather в Telegram
2. Отправить команду `/newbot`
3. Следовать инструкциям для создания бота
4. Получить токен бота
5. Токен уже есть: `7976655354:AAEYrKQ6WI0asMaaHLEFZQHI3YfWPXRYo90`

#### Настройка команд бота
1. Написать @BotFather
2. Отправить `/setcommands`
3. Выбрать бота
4. Добавить команды (опционально):
   - `/start` - Приветствие
   - `/help` - Помощь

#### Настройка webhook (для получения обновлений)
1. Настроить webhook URL: `https://your-server.com/api/telegram/webhook`
2. Или использовать long polling (для разработки)

### 2.5. Настройка n8n

#### Развертывание n8n инстанса
**Варианты:**
- Docker: `docker run -it --rm --name n8n -p 5678:5678 n8nio/n8n`
- n8n Cloud (платный)
- Собственный сервер

**Действия:**
1. Выбрать способ развертывания
2. Установить n8n
3. Настроить базу данных для n8n (опционально, по умолчанию SQLite)
4. Настроить переменные окружения в n8n:
   - `SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `PYTHON_SERVICES_URL`
   - `TELEGRAM_BOT_TOKEN`
   - И другие необходимые переменные

#### Создание webhook endpoints в n8n
1. Создать workflow с Webhook триггером
2. Получить webhook URL
3. Использовать этот URL в Next.js API для вызова n8n workflows

### 2.6. Настройка Python сервисов

#### Развертывание на сервере
1. Подготовить сервер (VPS/Cloud)
2. Установить Python 3.9+
3. Установить зависимости из `requirements.txt`
4. Настроить переменные окружения в `.env` файле
5. Запустить сервисы:
   - `wb_service/main.py`
   - `ozon_service/main.py`
   - `ads_service/main.py`
   - `brand_awareness/main.py`
   - `ai_service/main.py`
   - `telegram_bot/main.py`

#### Настройка systemd для автозапуска
1. Создать systemd service файлы для каждого сервиса
2. Пример файла `/etc/systemd/system/wb-service.service`:
```ini
[Unit]
Description=WB Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/seller-dashboard/services/python/wb_service
Environment="PATH=/usr/bin:/usr/local/bin"
ExecStart=/usr/bin/python3 main.py
Restart=always

[Install]
WantedBy=multi-user.target
```
3. Включить и запустить сервисы:
   - `sudo systemctl enable wb-service`
   - `sudo systemctl start wb-service`

#### Настройка Docker (альтернатива)
1. Создать `docker-compose.yml` для всех сервисов
2. Запустить: `docker-compose up -d`

### 2.7. Тестирование

#### Ручное тестирование сценариев
1. **Тестирование авторизации:**
   - Вход через Telegram
   - Создание seller при первом входе
   - Старт trial периода

2. **Тестирование интеграций:**
   - Добавление WB API ключа
   - Добавление Ozon API ключа
   - Синхронизация товаров
   - Проверка статуса синхронизации

3. **Тестирование товаров:**
   - Ручная загрузка товара
   - Редактирование товара
   - Классификация стилей

4. **Тестирование луков:**
   - Генерация лука
   - Сохранение лука
   - Перегенерация лука
   - Покупка пакета генераций

5. **Тестирование автопостинга:**
   - Создание поста
   - Публикация в соцсети
   - Планирование поста

6. **Тестирование рекламы:**
   - Создание кампании
   - Запуск кампании
   - Проверка метрик

7. **Тестирование платежей:**
   - Оформление подписки
   - Пополнение баланса
   - Покупка пакетов
   - Проверка webhook от YooKassa

#### Тестирование интеграций с внешними сервисами
1. **WB/Ozon API:**
   - Проверить получение товаров
   - Проверить обработку ошибок
   - Проверить rate limits

2. **Рекламные платформы:**
   - Создать тестовую кампанию
   - Проверить получение метрик
   - Проверить обработку ошибок

3. **AI сервисы:**
   - Протестировать генерацию изображений
   - Протестировать классификацию стилей
   - Проверить качество результатов

4. **Telegram:**
   - Проверить отправку уведомлений
   - Проверить обработку ошибок

#### Проверка безопасности
1. Проверить RLS политики в Supabase
2. Проверить валидацию входных данных
3. Проверить защиту API endpoints
4. Проверить HTTPS соединения
5. Проверить хранение секретов (не в коде)
6. Провести security audit

---

## 3. Чеклист перед запуском

- [ ] Все аккаунты зарегистрированы и настроены
- [ ] Все API ключи получены и сохранены в переменные окружения
- [ ] Домен настроен и SSL сертификат установлен
- [ ] n8n развернут и workflows настроены
- [ ] Python сервисы развернуты и запущены
- [ ] База данных Supabase создана и миграции применены
- [ ] Все интеграции протестированы
- [ ] Безопасность проверена
- [ ] Документация обновлена

---

## 4. Контакты и ресурсы

### Полезные ссылки
- YooKassa документация: https://yookassa.ru/developers
- Telegram Bot API: https://core.telegram.org/bots/api
- Facebook Ads API: https://developers.facebook.com/docs/marketing-apis
- VK Ads API: https://ads.vk.com/help/articles/help_api
- Яндекс.Директ API: https://yandex.ru/dev/direct/
- TikTok Ads API: https://ads.tiktok.com/marketing_api/docs
- Supabase документация: https://supabase.com/docs
- n8n документация: https://docs.n8n.io

### Контакты поддержки
- (Добавить контакты поддержки для каждого сервиса)

